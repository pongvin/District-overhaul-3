# ----
# Constants: 
# Build cost of the 3 tiers of generic districts.
@tier_1_base_resource_build_cost = 300
@tier_2_base_resource_build_cost = 550
@tier_3_base_resource_build_cost = 1200

# Build time of the 3 tiers of generic districts.
@tier_1_buildtime = 240
@tier_2_buildtime = 500
@tier_3_buildtime = 1000

# Upkeep of the 3 tiers of generic districts.
@tier_1_base_resource_upkeep = 1
@tier_2_base_resource_upkeep = 5
@tier_3_base_resource_upkeep = 10
@tier_2_strategic_resource_upkeep = 1
@tier_3_strategic_resource_upkeep = 2

# Number of base housing and job count of the 3 tiers of generic districts.
@tier_1_base_housing = 1
@tier_2_base_housing = 2
@tier_3_base_housing = 4
@tier_1_base_job_count = 2
@tier_2_base_job_count = 4
@tier_3_base_job_count = 6

# Min-max number of districts for planet generation.
@generic_district_min_number_on_planet = 6
@generic_district_max_number_on_planet = 20
@special_district_min_number_on_planet = 2
@special_district_max_number_on_planet = 5
# ----

# Bookmark: Tier 1 mining
district_mining = {
	icon = district_mining
	base_buildtime = @tier_1_buildtime
	min_for_deposits_on_planet = @generic_district_min_number_on_planet	
	max_for_deposits_on_planet = @generic_district_max_number_on_planet
	
	show_on_uncolonized = {
		generic_mining_districts_allowed = yes
		uncapped_districts_allowed = no
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	potential = {
		generic_mining_districts_allowed = yes
		uncapped_districts_allowed = no
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_mining
		district_mining_tier_2
		district_mining_tier_3
		district_mining_uncapped
		district_mining_uncapped_tier_2
		district_mining_uncapped_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_1_base_resource_build_cost }
		upkeep = { energy = @tier_1_base_resource_upkeep }		
	}

	planet_modifier = { planet_housing_add = @tier_1_base_housing }
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_1_base_job_count	}
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_1_base_job_count	}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_1_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_mechanized_mining
	}
	
	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}

district_mining_uncapped = {
	icon = district_mining
	base_buildtime = @tier_1_buildtime
	min_for_deposits_on_planet = @generic_district_min_number_on_planet	
	max_for_deposits_on_planet = @generic_district_max_number_on_planet
	
	show_on_uncolonized = {
		generic_mining_districts_allowed = yes
		uncapped_districts_allowed = yes
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	potential = {
		generic_mining_districts_allowed = yes
		uncapped_districts_allowed = yes
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_mining
		district_mining_tier_2
		district_mining_tier_3
		district_mining_uncapped
		district_mining_uncapped_tier_2
		district_mining_uncapped_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_1_base_resource_build_cost }
		upkeep = { energy = @tier_1_base_resource_upkeep }		
	}

	planet_modifier = { planet_housing_add = @tier_1_base_housing }
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_1_base_job_count	}
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_1_base_job_count	}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_1_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_mechanized_mining
	}
	
	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}

# Bookmark: Tier 2 mining
district_mining_tier_2 = {
	icon = district_mining
	base_buildtime = @tier_2_buildtime
	
	potential = {
		generic_mining_districts_allowed = yes
		tier_2_allowed = yes
		uncapped_districts_allowed = no
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_mining
		district_mining_tier_2
		district_mining_tier_3
		district_mining_uncapped
		district_mining_uncapped_tier_2
		district_mining_uncapped_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_2_base_resource_build_cost }
		upkeep = { 
			energy = @tier_2_base_resource_upkeep
			rare_crystals = @tier_2_strategic_resource_upkeep
		}		
	}

	planet_modifier = { planet_housing_add = @tier_2_base_housing }
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_2_base_job_count	}
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_2_base_job_count	}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_2_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_mechanized_mining
	}
	
	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}

district_mining_uncapped_tier_2 = {
	icon = district_mining
	base_buildtime = @tier_2_buildtime
	
	potential = {
		generic_mining_districts_allowed = yes
		tier_2_allowed = yes
		uncapped_districts_allowed = yes
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_mining
		district_mining_tier_2
		district_mining_tier_3
		district_mining_uncapped
		district_mining_uncapped_tier_2
		district_mining_uncapped_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_2_base_resource_build_cost }
		upkeep = { 
			energy = @tier_2_base_resource_upkeep
			rare_crystals = @tier_2_strategic_resource_upkeep
		}		
	}

	planet_modifier = { planet_housing_add = @tier_2_base_housing }
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_2_base_job_count	}
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_2_base_job_count	}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_2_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_mechanized_mining
	}
	
	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}

# Bookmark: Tier 3 mining
district_mining_tier_3 = {
	base_buildtime = @tier_3_buildtime
	
	potential = {
		generic_mining_districts_allowed = yes
		tier_3_allowed = yes
		uncapped_districts_allowed = no
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_farming
		district_farming_tier_2
		district_farming_tier_3
		district_farming_uncapped
		district_farming_uncapped_tier_2
		district_farming_uncapped_tier_3
		district_hydroponic_bay
		district_hydroponic_bay_tier_2
		district_hydroponic_bay_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_3_base_resource_build_cost }
		upkeep = { 
			energy = @tier_3_base_resource_upkeep
			rare_crystals = @tier_3_strategic_resource_upkeep
		}			
	}

	planet_modifier = { planet_housing_add = @tier_3_base_housing }
			
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_3_base_job_count }
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_3_base_job_count }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_3_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_industrial_farming
	}
	
	prerequisites = {
		tech_mechanized_mining
	}

	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}

district_mining_uncapped_tier_3 = {
	base_buildtime = @tier_3_buildtime
	
	potential = {
		generic_mining_districts_allowed = yes
		tier_3_allowed = yes
		uncapped_districts_allowed = yes
		OR = {
			uses_district_set = standard
			uses_district_set = hive_world
			uses_district_set = machine_world
		}
	}
	
	allow = { production_district_allowed = yes }
	
	conversion_ratio = 1
	convert_to = {
		district_farming
		district_farming_tier_2
		district_farming_tier_3
		district_farming_uncapped
		district_farming_uncapped_tier_2
		district_farming_uncapped_tier_3
		district_hydroponic_bay
		district_hydroponic_bay_tier_2
		district_hydroponic_bay_tier_3
	}
		
	resources = {
		category = planet_districts
		cost = { minerals = @tier_3_base_resource_build_cost }
		upkeep = { 
			energy = @tier_3_base_resource_upkeep
			rare_crystals = @tier_3_strategic_resource_upkeep
		}			
	}

	planet_modifier = { planet_housing_add = @tier_3_base_housing }
			
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = @tier_3_base_job_count }
	}		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = { job_miner_add = @tier_3_base_job_count }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = { job_fe_acolyte_mine_add = @tier_3_base_job_count }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_miner_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_mine_effect_desc
	}
	
	prerequisites = {
		tech_industrial_farming
	}
	
	prerequisites = {
		tech_mechanized_mining
	}

	ai_weight = {
		weight = 1
		# Is there a negative mineral income?
		modifier = {
			factor = 15
			need_minerals = yes
		}
		modifier = {
			factor = 1.5
			low_mineral_storage = yes
		}
		# Does the country have a bad mineral economy?
		modifier = {
			factor = 2
			bad_mineral_economy = yes
		}
		# Workers looking for work
		modifier = {
			factor = 5
			has_unemployed_workers = yes
		}
		# No one to work it anyway
		modifier = {
			factor = 0
			AND = {
				free_jobs > 1
				has_unemployed_workers = no
			}
		}
		# To many minerals already
		modifier = {
			factor = 0
			minerals_not_needed = yes
		}
		# Wrong Colony Type
		modifier = {
			factor = 0.1
			NOT = {
				OR = {
					has_designation = col_mining
					has_designation = col_rural
					has_designation = col_rural_gestalt
				}
			}
		}
	}
	ai_resource_production = {
		minerals = 2
		trigger = {
			OR = {
				low_mineral_income = yes
				medium_mineral_income = yes
			}
		}
	}
}